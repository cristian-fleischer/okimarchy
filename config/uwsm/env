# Changes require a restart to take effect.

# Ensure Omarchy bins are in the path
export OMARCHY_PATH=$HOME/.local/share/omarchy
export PATH=$OMARCHY_PATH/bin:$PATH

# Set default terminal and editor
source ~/.config/uwsm/default

# Activate mise if present on the system
omarchy-cmd-present mise && eval "$(mise activate bash)"

# Niri-specific: wait for env propagation before spawn-at-startup
# Apply only when running under Niri/UWSM sessions
if [ "${XDG_CURRENT_DESKTOP:-}" = "niri" ] || [ "${DESKTOP_SESSION:-}" = "niri-uwsm" ]; then
  export UWSM_WAIT_VARNAMES="WAYLAND_DISPLAY DISPLAY XDG_SESSION_TYPE XDG_CURRENT_DESKTOP"
  export UWSM_WAIT_VARNAMES_SETTLETIME=0.5
fi
