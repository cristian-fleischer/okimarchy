// Startup applications for Okimarchy Niri
// Uses a timing-aware startup script to handle uwsm environment issues

// Essential UI services startup script (handles timing issues with uwsm)
// This replaces individual spawn-at-startup commands that were failing due to
// environment variables not being ready when Niri starts with uwsm
spawn-at-startup "niri-autostart.sh"

// Screen locking and power management (using uwsm, started after environment is ready)
spawn-at-startup "uwsm app -- swayidle -w timeout 300 'swaylock' timeout 600 'niri msg action power-off-monitors' resume 'niri msg action power-on-monitors'"

// Input method (managed by uwsm, needs special session handling)
spawn-at-startup "uwsm app -- fcitx5"

// Application launcher (managed by uwsm, with & for background)
spawn-at-startup "uwsm app -- walker --gapplication-service &"

// Authentication agent (direct spawn, not managed by uwsm for security)
spawn-at-startup "/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1"

// Clipboard persistence (direct spawn)
spawn-at-startup "wl-clip-persist --clipboard regular --all-mime-type-regex '^(?!x-kde-passwordManagerHint).+'"

// First run command (direct spawn)
spawn-at-startup "omarchy-cmd-first-run"
